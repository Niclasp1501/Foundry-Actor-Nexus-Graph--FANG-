<div class="fang-app-container">
    <!-- Sidebar / Toolbar -->
    <aside class="sidebar glass-panel">
        <header class="sidebar-header">
            <h1>Token Graph</h1>
            <p>Netzwerk & Beziehungen</p>
        </header>

        <div class="control-group">
            <h3>Verbindung erstellen</h3>
            <div class="input-stack">
                <select id="sourceSelect">
                    <option value="" disabled selected>Quelle wählen</option>
                </select>
                <select id="targetSelect">
                    <option value="" disabled selected>Ziel wählen</option>
                </select>
                <input type="text" id="linkLabel" placeholder="Label z.B. 'ist verwandt mit'">
                <button id="btnAddLink" class="btn secondary-btn">Verbinden</button>
            </div>
        </div>

        <div class="control-group">
            <h3>Element löschen</h3>
            <div class="input-stack">
                <select id="deleteSelect">
                    <option value="" disabled selected>Knoten / Link wählen</option>
                </select>
                <button id="btnDeleteElement" class="btn danger-btn"
                    style="background: #8b0000; color: white;">Löschen</button>
            </div>
        </div>

        <div class="control-group gm-only">
            <h3>Präsentation</h3>
            <div class="input-stack">
                <button id="btnShareGraph" class="btn action-btn"
                    title="Zeigt den Graphen bei allen Spielern in einem normalen Fenster">
                    <i class="fas fa-eye"></i> Spielern zeigen
                </button>
                <button id="btnShareGraphMonitor" class="btn action-btn"
                    title="Zeigt den Graphen im Vollbild nur auf dem Monitor" style="margin-top: 5px;">
                    <i class="fas fa-tv"></i> Monitor zeigen
                </button>
                <button id="btnCloseGraphRemote" class="btn action-btn" title="Schließt den Graphen bei allen Spielern"
                    style="margin-top: 5px;">
                    <i class="fas fa-times-circle"></i> Bei Spielern schließen
                </button>
                <button id="btnCloseGraphMonitor" class="btn action-btn"
                    title="Schließt den Graphen nur auf dem Monitor" style="margin-top: 5px;">
                    <i class="fas fa-desktop"></i> Bei Monitor schließen
                </button>
            </div>
        </div>

        <div class="control-group actions-group" style="display: none;">
            <!-- Hidden export / import group as Journal Entry storage replaces this. Kept in DOM for potential future use or debugging. -->
            <h3>Export / Import</h3>
            <div class="button-row">
                <button id="btnSave" class="btn action-btn">Speichern</button>
                <label for="importFile" class="btn action-btn file-label">Laden</label>
                <input type="file" id="importFile" accept=".json" style="display: none;">
            </div>
        </div>
    </aside>

    <!-- Main Canvas Area -->
    <main class="canvas-container" style="position: relative;">
        <canvas id="graphCanvas"></canvas>
    </main>
    </main>
</div>